(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/tabbar/workHours/hoursSettle/hoursSettle"],{"1b0b":function(t,n,e){"use strict";(function(t){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=i(e("a34a")),r=e("2f62");function i(t){return t&&t.__esModule?t:{default:t}}function u(t,n,e,o,r,i,u){try{var a=t[i](u),c=a.value}catch(s){return void e(s)}a.done?n(c):Promise.resolve(c).then(o,r)}function a(t){return function(){var n=this,e=arguments;return new Promise(function(o,r){var i=t.apply(n,e);function a(t){u(i,o,r,a,c,"next",t)}function c(t){u(i,o,r,a,c,"throw",t)}a(void 0)})}}function c(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{},o=Object.keys(e);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(e).filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.forEach(function(n){s(t,n,e[n])})}return t}function s(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}var f={data:function(){return{personinfo:{},downOption:{auto:!1},upOption:{auto:!1,textNoMore:"-- 已经到底了 --"},work_detail:[],loading:!0,wages:""}},onLoad:function(n){var e=this;this.personinfo=JSON.parse(decodeURIComponent(n.item)),this.wages=this.$_.get(this.personinfo,"wages",""),t.$on("refreshList",function(){console.log("refreshList"),e.init()}),this.init()},onUnload:function(){t.$off("refreshJwt")},computed:c({c_CustomBar:function(){return this.CustomBar}},(0,r.mapGetters)(["id"]),{no_data:function(){return!this.loading&&0==this.work_detail.length},sum_work_tiem:function(){var t=this,n=0;return this.work_detail.forEach(function(e){n+=t.$_.toNumber(e.workTime)}),n},sum_price:function(){return this.$_.get(this.personinfo,"cumulativeHours",0)*this.$_.toNumber(this.wages)},countCost:function(){var t=0;return this.work_detail.forEach(function(n){t+=n.wages}),t}}),methods:{init:function(){this.get_work_time()},downCallback:function(t){t.resetUpScroll()},upCallback:function(){var t=a(o.default.mark(function t(n){return o.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.get_work_time();case 2:n.endSuccess(!1);case 3:case"end":return t.stop()}},t,this)}));function n(n){return t.apply(this,arguments)}return n}(),get_work_time:function(){var t=this;this.$http.get("personwx.personproworktimedetail/1.0/",{pid:this.personinfo.id,proId:this.personinfo.proId}).then(function(n){console.log(n),t.work_detail=n.data.data}).finally(function(){t.loading=!1})},back:function(){t.navigateBack({delta:1})},sub_settle:function(){var n=this;""!==this.wages?t.showModal({title:"提示",content:"当前结算金额为".concat(this.sum_price,"元，确认是否结算"),confirmText:"确认结算",success:function(e){e.confirm?(console.log("用户点击确定"),n.$http.post("personwx.personproworktimeseet/1.0/",{pid:n.personinfo.id,proId:n.personinfo.proId,wages:n.wages}).then(function(e){console.log(e),t.showToast({title:"结算成功",duration:2e3,icon:"success",success:function(){setTimeout(function(){n.back()},300)}})})):e.cancel&&console.log("用户点击取消")}}):t.showToast({title:"请输入工价",duration:2e3,icon:"none"})},deliveryPeriod:function(t){return this.$utils.format_date(t)}}};n.default=f}).call(this,e("543d")["default"])},2421:function(t,n,e){"use strict";e.r(n);var o=e("d268"),r=e("32e9");for(var i in r)"default"!==i&&function(t){e.d(n,t,function(){return r[t]})}(i);e("7a17");var u,a=e("f0c5"),c=Object(a["a"])(r["default"],o["b"],o["c"],!1,null,"5a4979fd",null,!1,o["a"],u);n["default"]=c.exports},"32e9":function(t,n,e){"use strict";e.r(n);var o=e("1b0b"),r=e.n(o);for(var i in o)"default"!==i&&function(t){e.d(n,t,function(){return o[t]})}(i);n["default"]=r.a},"619f":function(t,n,e){"use strict";(function(t){e("ac93"),e("921b");o(e("66fd"));var n=o(e("2421"));function o(t){return t&&t.__esModule?t:{default:t}}t(n.default)}).call(this,e("543d")["createPage"])},"7a17":function(t,n,e){"use strict";var o=e("9d52"),r=e.n(o);r.a},"9d52":function(t,n,e){},d268:function(t,n,e){"use strict";var o,r=function(){var t=this,n=t.$createElement,e=(t._self._c,t.__map(t.work_detail,function(n,e){var o=t.deliveryPeriod(n.createdTime);return{$orig:t.__get_orig(n),m0:o}}));t.$mp.data=Object.assign({},{$root:{l0:e}})},i=[];e.d(n,"b",function(){return r}),e.d(n,"c",function(){return i}),e.d(n,"a",function(){return o})}},[["619f","common/runtime","common/vendor"]]]);