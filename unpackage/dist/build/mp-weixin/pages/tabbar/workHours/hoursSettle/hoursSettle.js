(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/tabbar/workHours/hoursSettle/hoursSettle"],{"199e":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=i(n("a34a")),r=n("2f62");function i(t){return t&&t.__esModule?t:{default:t}}function u(t,e,n,o,r,i,u){try{var a=t[i](u),s=a.value}catch(c){return void n(c)}a.done?e(s):Promise.resolve(s).then(o,r)}function a(t){return function(){var e=this,n=arguments;return new Promise(function(o,r){var i=t.apply(e,n);function a(t){u(i,o,r,a,s,"next",t)}function s(t){u(i,o,r,a,s,"throw",t)}a(void 0)})}}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),o.forEach(function(e){c(t,e,n[e])})}return t}function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var f={data:function(){return{personinfo:{},downOption:{auto:!1},upOption:{auto:!1,textNoMore:"-- 已经到底了 --"},work_detail:[],loading:!0,wages:""}},onLoad:function(e){var n=this;this.personinfo=JSON.parse(decodeURIComponent(e.item)),this.wages=this.$_.get(this.personinfo,"wages",""),t.$on("refreshList",function(){console.log("refreshList"),n.init()}),this.init()},onUnload:function(){t.$off("refreshJwt")},computed:s({c_CustomBar:function(){return this.CustomBar}},(0,r.mapGetters)(["id"]),{no_data:function(){return!this.loading&&0==this.work_detail.length},sum_work_tiem:function(){var t=this,e=0;return this.work_detail.forEach(function(n){e+=t.$_.toNumber(n.workTime)}),e},sum_price:function(){return this.$_.get(this.personinfo,"cumulativeHours",0)*this.$_.toNumber(this.wages)}}),methods:{init:function(){this.get_work_time()},downCallback:function(t){t.resetUpScroll()},upCallback:function(){var t=a(o.default.mark(function t(e){return o.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.get_work_time();case 2:e.endSuccess(!1);case 3:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),get_work_time:function(){var t=this;this.$http.get("personwx.personproworktimedetail/1.0/",{pid:this.personinfo.id,proId:this.personinfo.proId}).then(function(e){console.log(e),t.work_detail=e.data.data}).finally(function(){t.loading=!1})},back:function(){t.navigateBack({delta:1})},sub_settle:function(){var e=this;""!==this.wages?t.showModal({title:"提示",content:"当前结算金额为".concat(this.sum_price,"元，确认是否结算"),confirmText:"确认结算",success:function(n){n.confirm?(console.log("用户点击确定"),e.$http.post("personwx.personproworktimeseet/1.0/",{pid:e.personinfo.id,proId:e.personinfo.proId,wages:e.wages}).then(function(n){console.log(n),t.showToast({title:"结算成功",duration:2e3,icon:"success",success:function(){setTimeout(function(){e.back()},300)}})})):n.cancel&&console.log("用户点击取消")}}):t.showToast({title:"请输入工价",duration:2e3,icon:"none"})},deliveryPeriod:function(t){return this.$utils.format_date(t)}}};e.default=f}).call(this,n("543d")["default"])},2421:function(t,e,n){"use strict";n.r(e);var o=n("5d08"),r=n("32e9");for(var i in r)"default"!==i&&function(t){n.d(e,t,function(){return r[t]})}(i);n("296f");var u=n("2877"),a=Object(u["a"])(r["default"],o["a"],o["b"],!1,null,"75bd6a94",null);e["default"]=a.exports},"296f":function(t,e,n){"use strict";var o=n("9d42"),r=n.n(o);r.a},"32e9":function(t,e,n){"use strict";n.r(e);var o=n("199e"),r=n.n(o);for(var i in o)"default"!==i&&function(t){n.d(e,t,function(){return o[t]})}(i);e["default"]=r.a},"5d08":function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=(t._self._c,t.__map(t.work_detail,function(e,n){var o=t.deliveryPeriod(e.createdTime);return{$orig:t.__get_orig(e),m0:o}}));t.$mp.data=Object.assign({},{$root:{l0:n}})},r=[];n.d(e,"a",function(){return o}),n.d(e,"b",function(){return r})},"619f":function(t,e,n){"use strict";(function(t){n("ac93"),n("921b");o(n("66fd"));var e=o(n("2421"));function o(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},"9d42":function(t,e,n){}},[["619f","common/runtime","common/vendor"]]]);