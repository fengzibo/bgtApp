(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/tabbar/my/myInfo/step2"],{"0b46":function(e,t,i){},"10ed":function(e,t,i){"use strict";i.r(t);var a=i("f087"),s=i.n(a);for(var n in a)"default"!==n&&function(e){i.d(t,e,function(){return a[e]})}(n);t["default"]=s.a},"3b96":function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=(e._self._c,e.__map(e.work_list,function(t,i){var a=e.get_typeLevel_text(t),s=e.get_work_time(t);return{$orig:e.__get_orig(t),m0:a,m1:s}}));e._isMounted||(e.e0=function(t){e.certificate_model=!e.certificate_model}),e.$mp.data=Object.assign({},{$root:{l0:i}})},s=[];i.d(t,"a",function(){return a}),i.d(t,"b",function(){return s})},b978:function(e,t,i){"use strict";i.r(t);var a=i("3b96"),s=i("10ed");for(var n in s)"default"!==n&&function(e){i.d(t,e,function(){return s[e]})}(n);i("c326");var o=i("2877"),r=Object(o["a"])(s["default"],a["a"],a["b"],!1,null,"5674e9fb",null);t["default"]=r.exports},c326:function(e,t,i){"use strict";var a=i("0b46"),s=i.n(a);s.a},f087:function(e,t,i){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i("2f62");function s(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},a=Object.keys(i);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),a.forEach(function(t){n(e,t,i[t])})}return e}function n(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var o={props:{res:{type:Object,default:function(){return{}}}},data:function(){return{form_data:{education:"",limit:"",addr:"",homeAddress:""},type_index:[0,0],type_picker:[],type_picker_copy:[],type_level:0,type_level_data:[],certificate_model:!1,certificate_data:{name:"",deadline:"YYYY-MM-DD"},certificate_upload_src:"",certificate_upload_file:null,exper_model:!1,exper_data:{company:"",equipment:"",type_index:[0,0],type:"钳工",price:"",start_time:"YYYY-MM-DD",end_time:"YYYY-MM-DD",remark:"",addr:""},work_list:[],card_list:[],loading:!0,CustomBar:this.CustomBar,loadProgress:0,exper_edit:!1,current_exper_id:""}},computed:s({},(0,a.mapState)(["user_info"]),(0,a.mapGetters)(["id"]),{has_res:function(){return"{}"!==JSON.stringify(this.res)}}),mounted:function(){this.init()},methods:{init:function(){this.get_type_list()},LoadProgress:function(e){var t=this;this.loadProgress=this.loadProgress+3,this.loadProgress<100&&this.loading&&setTimeout(function(){t.LoadProgress()},100)},get_work_list:function(){var e=this;console.log("getid",this.id),this.$http.post("personwx.worklist/1.0/",{pid:this.id}).then(function(t){console.log("work_list",t),e.work_list=t.data.data.data})},get_card_list:function(){var e=this;this.$http.post("personwx.cardfilelist/1.0/",{pid:this.id}).then(function(t){console.log("card_list",t),e.card_list=t.data.data.data})},get_type_list:function(){var e=this;this.type_picker=[],this.type_level_data=[],this.loading=!0,this.LoadProgress(),this.$http.post("personwx.tylelist/1.0/").then(function(t){console.log(t);var i=[];t.data.data.data.forEach(function(e,t){"0"==e.pid&&i.push(e)}),e.type_picker.push(i),i.forEach(function(i){var a=[];t.data.data.data.forEach(function(e,t){i.id==e.pid&&a.push(e)}),e.type_level_data.push(a)}),e.type_picker.push(e.type_level_data[0]),e.type_picker_copy=JSON.parse(JSON.stringify(e.type_picker)),console.log(e.type_level_data),console.log(e),e.get_card_list(),e.get_work_list(),e.has_res&&e.init_info(),e.loadProgress=100,setTimeout(function(){e.loading=!1},100)})},init_info:function(){console.log(this.res),this.form_data.education=this.res.education,this.form_data.limit=this.res.workYear,this.form_data.addr=this.res.expectedPlace,this.form_data.homeAddress=this.res.homeAddress,this.type_index=this.$utils._get(this.get_typeLevel_obj(this.res),"type_index",[0,0]),console.log(this.$utils._get(this.get_typeLevel_obj(this.res),"type_index",[0,0])),this.type_picker[1]=this.type_level_data[this.type_index[0]]},typeChange:function(e){this.type_index=e.detail.value},MultitypeChange:function(e){var t={type_picker:this.type_picker,type_index:this.type_index};switch(t.type_index[e.detail.column]=e.detail.value,e.detail.column){case 0:console.log(e.detail.column),t.type_picker[1]=this.type_level_data[t.type_index[0]],t.type_index.splice(1,1,0);break}this.type_picker=t.type_picker,this.type_index=t.type_index},typeLevelChange:function(e){this.type_level=e.detail.value,this.form_data.typeLevel=this.type_level_pick[this.type_level]},hideModal:function(){this.certificate_model=!1},chooseImage:function(){var t=this;e.chooseImage({count:1,sizeType:["compressed"],success:function(e){console.log("chooseImage success, temp path is",e);var i=e.tempFilePaths[0];t.certificate_upload_src=i,t.certificate_upload_file=e.tempFiles[0]},fail:function(e){console.log("chooseImage fail",e)}})},deadlineChange:function(e){this.certificate_data.deadline=e.detail.value},submit_cert:function(){var t=this;e.showLoading({title:"提交保存中"});e.uploadFile({url:this.$api_url+"personwx.cardfile/1.0/",filePath:this.certificate_upload_src,name:"cardFile",header:{"Content-Type":"application/x-www-form-urlencoded"},formData:{fileName:this.certificate_data.name,validityPeriod:this.certificate_data.deadline,pid:this.id},success:function(e){console.log("uploadImage success, res is:",e),t.get_card_list()},fail:function(t){console.log("uploadImage fail",t),e.showModal({content:t.errMsg,showCancel:!1})},complete:function(){t.hideModal(),e.hideLoading()}})},prev:function(){e.navigateBack({delta:1})},next:function(t){var i=this;e.showLoading({title:"加载中"}),this.$http.post("personwx.basicwork/1.0/",{education:this.form_data.education,workYear:this.form_data.limit,expectedPlace:this.form_data.addr,homeAddress:this.form_data.homeAddress,typeLevel:this.type_picker[1][this.type_index[1]].id,id:this.id}).then(function(a){console.log(a),"save"==t&&e.showToast({title:"保存成功",duration:2e3,icon:"success",success:function(){e.navigateBack({delta:1})}}),e.hideLoading(),i.$emit("next")})},addExper:function(){this.exper_data={company:"",equipment:"",type_index:[0,0],type:"钳工",price:"",start_time:"YYYY-MM-DD",end_time:"YYYY-MM-DD",remark:"",addr:""},this.exper_model=!0},hideExperModal:function(){this.exper_model=!1},submit_exper:function(){var t=this;e.showLoading({title:"保存中"});var i="personwx.addwork/1.0/",a={scompany:this.exper_data.company,deviceName:this.exper_data.equipment,typeLevel:this.type_picker_copy[1][this.exper_data.type_index[1]].id,pid:this.id,wages:this.exper_data.price,sstartTime:this.exper_data.start_time,sendTime:this.exper_data.end_time,scontext:this.exper_data.remark,isPlatform:"1"};this.exper_edit&&(i="personwx.updatework/1.0/",a.id=this.current_exper_id),this.$http.post(i,a).then(function(i){console.log(i),t.get_work_list(),t.hideExperModal(),e.hideLoading(),t.exper_edit=!1})},experTypeChange:function(e){this.exper_data.type_index=e.detail.value},experMultitypeChange:function(e){var t={type_picker:this.type_picker_copy,type_index:this.exper_data.type_index};switch(t.type_index[e.detail.column]=e.detail.value,e.detail.column){case 0:console.log(e.detail.column),t.type_picker[1]=this.type_level_data[t.type_index[0]],t.type_index.splice(1,1,0);break}this.type_picker_copy=t.type_picker,this.exper_data.type_index=t.type_index},experStartChange:function(e){this.exper_data.start_time=e.detail.value},experEndChange:function(e){this.exper_data.end_time=e.detail.value},get_typeLevel_obj:function(e){for(var t=null,i=[],a=0;a<this.type_level_data.length;a++){for(var s=0;s<this.type_level_data[a].length;s++)if(e.typeLevel==this.type_level_data[a][s].id){t=this.type_level_data[a][s],i.push(a),i.push(s);break}if(t)break}return 0==i.length&&(i=[0,0]),{obj:t,type_index:i}},get_typeLevel_text:function(e){var t=this.$utils._get(this.get_typeLevel_obj(e),"obj","");return console.log(t),this.$utils._get(t,"pname","")+"-"+this.$utils._get(t,"typeName","")},get_work_time:function(e){return this.$utils.format_date(e.sstartTime,"/")+"-"+this.$utils.format_date(e.sendTime,"/")},edit_work:function(e){this.current_exper_id=e.id,this.exper_data.company=e.scompany,this.exper_data.equipment=e.deviceName,this.exper_data.equipment=e.deviceName,this.exper_data.type_index=this.$utils._get(this.get_typeLevel_obj(e),"type_index",[0,0]),this.type_picker_copy[1]=this.type_level_data[this.exper_data.type_index[0]],this.exper_data.price=e.wages,this.exper_data.start_time=this.$utils.format_date(e.sstartTime),this.exper_data.end_time=this.$utils.format_date(e.sendTime),this.exper_data.remark=e.scontext,this.exper_model=!0,this.exper_edit=!0},removeCard:function(e){var t=this;this.$http.post("personwx.cardfiledel/1.0/",{id:e.id}).then(function(e){console.log(e),t.get_card_list()})}}};t.default=o}).call(this,i("543d")["default"])}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'pages/tabbar/my/myInfo/step2-create-component',
    {
        'pages/tabbar/my/myInfo/step2-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('543d')['createComponent'](__webpack_require__("b978"))
        })
    },
    [['pages/tabbar/my/myInfo/step2-create-component']]
]);                
