(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/tabbar/my/myInfo/step1"],{"0e3a":function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=a("2f62");function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},s=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),s.forEach(function(t){r(e,t,a[t])})}return e}function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var i=null,n={props:{res:{type:Object,default:function(){return{}}}},data:function(){return{imageSrc:"",has_id_card:!1,form_data:{name:"",sex:"",date_birth:"",id_card:"",addr:"",phone:""},picker:["男","女"],sex_index:0,progress_model:!1,progress:0}},computed:o({},(0,s.mapState)(["user_info"]),(0,s.mapGetters)(["id"]),{has_res:function(){return"{}"!==JSON.stringify(this.res)}}),mounted:function(){this.has_res&&(console.log(this.res),this.form_data.name=this.res.name,this.form_data.sex=this.res.sex,this.form_data.id_card=this.res.idNumber,this.form_data.addr=this.res.address,this.form_data.phone=this.res.phone,this.form_data.date_birth=this.$utils.format_date(this.res.birthday))},methods:{chooseImage:function(){var t=this;e.chooseImage({count:1,sizeType:["compressed"],success:function(e){console.log("chooseImage success, temp path is",e);var a=e.tempFilePaths[0];t.imageSrc=a},fail:function(e){console.log("chooseImage fail",e)}})},identifyCard:function(){var t=this;if(""!=this.imageSrc){this.progress_model=!0;var a=e.uploadFile({url:this.$api_url+"personwx.idcardocr/1.0/",filePath:this.imageSrc,name:"idcard",header:{"Content-Type":"application/x-www-form-urlencoded"},success:function(a){console.log("uploadImage success, res is:",a),i=JSON.parse(a.data).data,console.log(i),t.form_data.name=i.name,t.form_data.sex=i.sex,t.form_data.date_birth=t.$utils.format_date(i.birthday),t.form_data.id_card=i.idNumber,t.form_data.addr=i.address,t.has_id_card=!0,t.progress_model=!1,e.showToast({title:"识别成功",icon:"success",duration:1e3}),t.$emit("showTips","请确认信息，并填写正确的手机号码")},fail:function(a){console.log("uploadImage fail",a),e.showModal({content:a.errMsg,showCancel:!1}),t.progress_model=!1}});a.onProgressUpdate(function(e){console.log("上传进度"+e.progress),console.log("已经上传的数据长度"+e.totalBytesSent),console.log("预期需要上传的数据总长度"+e.totalBytesExpectedToSend);var a=e.progress;100==a&&(a=99),t.progress=a})}else e.showToast({title:"请拍摄或上传身份证",duration:2e3,icon:"none"})},PickerChange:function(e){this.sex_index=e.detail.value,this.form_data.sex=this.picker[this.sex_index]},validDateChange:function(e){this.form_data.date_birth=e.detail.value},next:function(){var t=this;console.log(this.form_data),e.showLoading({title:"提交中"});var a="personwx.basicinfo/1.0/",s={pname:this.form_data.name,sex:this.form_data.sex,birthday:this.form_data.date_birth,nation:this.has_res?this.res.nation:i.nation,address:this.form_data.addr,idNumber:this.form_data.id_card,phone:this.form_data.phone};this.has_res&&(a="personwx.basicwork/1.0/",s.id=this.id),this.$http.post(a,s).then(function(a){console.log(a);var s=JSON.parse(JSON.stringify(t.user_info));s.id=t.$utils._get(a,"data.data.data.data.pid",""),s.loginName=t.$utils._get(t.form_data,"name",s.nickName),t.$store.commit("setUserInfo",s),e.hideLoading(),t.has_res&&e.navigateBack({delta:1}),t.$emit("next"),t.$emit("showTips","更完整的工作信息将会给您带来更多的工作机会")})}}};t.default=n}).call(this,a("543d")["default"])},"7d19":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement;e._self._c},o=[];a.d(t,"a",function(){return s}),a.d(t,"b",function(){return o})},9005:function(e,t,a){"use strict";var s=a("e6d8"),o=a.n(s);o.a},d5c9:function(e,t,a){"use strict";a.r(t);var s=a("7d19"),o=a("f5bc");for(var r in o)"default"!==r&&function(e){a.d(t,e,function(){return o[e]})}(r);a("9005");var i=a("2877"),n=Object(i["a"])(o["default"],s["a"],s["b"],!1,null,"395cb81c",null);t["default"]=n.exports},e6d8:function(e,t,a){},f5bc:function(e,t,a){"use strict";a.r(t);var s=a("0e3a"),o=a.n(s);for(var r in s)"default"!==r&&function(e){a.d(t,e,function(){return s[e]})}(r);t["default"]=o.a}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'pages/tabbar/my/myInfo/step1-create-component',
    {
        'pages/tabbar/my/myInfo/step1-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('543d')['createComponent'](__webpack_require__("d5c9"))
        })
    },
    [['pages/tabbar/my/myInfo/step1-create-component']]
]);                
