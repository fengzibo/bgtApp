(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/tabbar/workbench/logReport/logReport"],{"1dbf":function(t,e,o){"use strict";(function(t){o("ac93"),o("921b");n(o("66fd"));var e=n(o("2fe1"));function n(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,o("543d")["createPage"])},"220c":function(t,e,o){},"2fe1":function(t,e,o){"use strict";o.r(e);var n=o("3baf"),r=o("bcda");for(var a in r)"default"!==a&&function(t){o.d(e,t,function(){return r[t]})}(a);o("9103");var i,s=o("f0c5"),c=Object(s["a"])(r["default"],n["b"],n["c"],!1,null,"04062110",null,!1,n["a"],i);e["default"]=c.exports},"3baf":function(t,e,o){"use strict";var n,r=function(){var t=this,e=t.$createElement,o=(t._self._c,t.__map(t.proTaskList,function(e,o){var n=t.deliveryPeriod(e.createTime);return{$orig:t.__get_orig(e),m0:n}}));t.$mp.data=Object.assign({},{$root:{l0:o}})},a=[];o.d(e,"b",function(){return r}),o.d(e,"c",function(){return a}),o.d(e,"a",function(){return n})},9103:function(t,e,o){"use strict";var n=o("220c"),r=o.n(n);r.a},"9f33":function(t,e,o){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=o("2f62");function r(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{},n=Object.keys(o);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(o).filter(function(t){return Object.getOwnPropertyDescriptor(o,t).enumerable}))),n.forEach(function(e){a(t,e,o[e])})}return t}function a(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}var i=function(){return o.e("components/dark-calendar/dark-calendar").then(o.bind(null,"a657"))},s={data:function(){return{proPersonList:[],proTaskList:[],projectInfo:{},work_log_data:[],person_log_data:[],all_progress:{id:"",type:"",value:""},workDate:""}},components:{darkCalendar:i},computed:r({},(0,n.mapState)(["bgt_c_task","bgt_ct_id"]),{no_data:function(){var t="{}"==JSON.stringify(this.projectInfo),e=0==this.proTaskList.length,o=0==this.proPersonList.length;return t&&e&&o}}),onLoad:function(){var e=this;t.$on("refreshList",function(){console.log("refreshList"),e.init()}),this.init()},onUnload:function(){t.$off("refreshJwt")},methods:{init:function(){this.workDate=this.$utils.format_date(new Date),this.get_day_log()},get_day_log:function(){var t=this;this.$http.get("/personwx.getdaylog/1.0/",{proId:this.bgt_ct_id,workDate:this.workDate}).then(function(e){console.log(e);var o=[],n=[];t.proPersonList=t.$_.get(e,"data.proPersonList",[]),t.proTaskList=t.$_.get(e,"data.proTaskList",[]),t.projectInfo=t.$_.get(e,"data.projectInfo",{}),t.proTaskList.forEach(function(e){var n={id:e.id,type:e.type,value:t.$_.get(e,"taskProcess","")};o.push(n)}),t.proPersonList.forEach(function(e){var o={id:e.id,type:e.type,value:t.$_.get(e,"dayHours","")};n.push(o)}),t.work_log_data=o,t.person_log_data=n,t.all_progress.id=t.projectInfo.id,t.all_progress.type=t.projectInfo.type,t.all_progress.value=t.$_.get(t.projectInfo,"schedule","")})},deliveryPeriod:function(t){return this.$utils.format_date(t)},back:function(){t.navigateBack({delta:1})},save_log:function(){var e=this,o=this.work_log_data.concat(this.person_log_data,this.all_progress);console.log(o),console.log(JSON.stringify(o)),this.$http.post("personwx.updatedaylog/1.0/",{workLogData:JSON.stringify(o)}).then(function(o){console.log(o),0==e.$_.get(o,"data.code","")?(t.$emit("taskToWork"),t.showToast({title:"日志提报成功",duration:2e3,success:function(){setTimeout(function(){e.back()},300)}})):t.showToast({title:"日志提报失败",duration:2e3})})},change_date:function(t){console.log(t),this.workDate=t,this.get_day_log()}}};e.default=s}).call(this,o("543d")["default"])},bcda:function(t,e,o){"use strict";o.r(e);var n=o("9f33"),r=o.n(n);for(var a in n)"default"!==a&&function(t){o.d(e,t,function(){return n[t]})}(a);e["default"]=r.a}},[["1dbf","common/runtime","common/vendor"]]]);