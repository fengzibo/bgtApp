(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/tabbar/workbench/workbenchHead"],{"6e1e":function(t,e,n){},"6e1f":function(t,e,n){"use strict";n.r(e);var i=n("be15"),o=n.n(i);for(var r in i)"default"!==r&&function(t){n.d(e,t,function(){return i[t]})}(r);e["default"]=o.a},ad3e:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=(t._self._c,t.__map(t.bgt_c_task,function(e,n){var i=t.deliveryPeriod(e.deliveryPeriod);return{$orig:t.__get_orig(e),m0:i}})),i=t.__map(t.person_list,function(e,n){var i=t.status_class(e.status),o=t.status_text(e.status),r=t.expectedPlace(e.expectedPlace);return{$orig:t.__get_orig(e),m1:i,m2:o,m3:r}});t.$mp.data=Object.assign({},{$root:{l0:n,l1:i}})},o=[];n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o})},b7bb:function(t,e,n){"use strict";var i=n("6e1e"),o=n.n(i);o.a},be15:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a(n("a34a")),o=n("2f62"),r=a(n("adf4"));function a(t){return t&&t.__esModule?t:{default:t}}function s(t,e,n,i,o,r,a){try{var s=t[r](a),c=s.value}catch(u){return void n(u)}s.done?e(c):Promise.resolve(c).then(i,o)}function c(t){return function(){var e=this,n=arguments;return new Promise(function(i,o){var r=t.apply(e,n);function a(t){s(r,i,o,a,c,"next",t)}function c(t){s(r,i,o,a,c,"throw",t)}a(void 0)})}}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(e){d(t,e,n[e])})}return t}function d(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var l=function(){return n.e("pages/tabbar/workbench/headTodo").then(n.bind(null,"ff40"))},f=function(){return n.e("pages/tabbar/workbench/peopleList").then(n.bind(null,"d655"))},_=function(){return n.e("pages/tabbar/workbench/plan").then(n.bind(null,"4a11"))},p=function(){return n.e("pages/tabbar/workbench/errManage").then(n.bind(null,"11e3"))},h={data:function(){return{is_unfold:!1,list:[{name:"李小吧",age:"22",tag:["电工学徒"],address:"深圳市龙华区大浪街",status:"准备中",status_no:2},{name:"李小吧",age:"22",tag:["电工学徒"],address:"深圳市龙华区大浪街",status:"确认能来",status_no:1},{name:"李小吧",age:"22",tag:["电工学徒"],address:"深圳市龙华区大浪街",status:"确认不来",status_no:0},{name:"李小吧",age:"22",tag:["电工学徒"],address:"深圳市龙华区大浪街",status:"等待确认",status_no:3}],swiperHeight:"",project_detail:{},downOption:{auto:!1},upOption:{auto:!1,isLock:!0},current_swiper:0,form_data:{startTime:"",address:"",points:"",description:""},tab_list:[{name:"待办事项",data:[],is_rquest:!1},{name:"人员列表",data:[],is_rquest:!1},{name:"生产计划",data:[],is_rquest:!1},{name:"异常管理",data:[],is_rquest:!1}],TabCur:0,scrollLeft:0}},props:{location:{default:null}},components:{headTodo:l,peopleList:f,plan:_,errManage:p},mounted:function(){this.init()},computed:u({},(0,o.mapState)(["bgt_c_task","bgt_ct_id"]),(0,o.mapGetters)(["user_role","id"]),{person_list:function(){return this.$utils._get(this.project_detail,"personList",[])},project:function(){return this.$utils._get(this.project_detail,"project",{})},c_CustomBar:function(){return this.CustomBar},current_bgt_c_task:function(){var t=this;return this.bgt_c_task.find(function(e){return e.id==t.bgt_ct_id})}}),watch:{bgt_ct_id:function(t){console.log(t),this.current_swiper=this.bgt_c_task.findIndex(function(e){return e.id==t}),this.init()},location:{handler:function(t){console.log("wlocation",t),t&&(this.form_data.address=t.address,this.form_data.points="[".concat(t.latitude,",").concat(t.longitude,"]"),console.log(this.form_data))},deep:!0}},methods:{init:function(){console.log(this.bgt_c_task,this.bgt_ct_id),""==this.bgt_ct_id?this.get_head_project():this.get_project_detail()},set_form_data:function(){var t=this,e=this.bgt_c_task.findIndex(function(e){return e.id==t.bgt_ct_id});this.current_swiper=e,this.form_data.startTime=this.$utils.format_date(this.bgt_c_task[e].startTime),this.form_data.address=this.$utils._get(this.bgt_c_task[e],"address",""),this.form_data.points=this.$utils._get(this.bgt_c_task[e],"points",""),this.form_data.description=this.bgt_c_task[e].description},get_head_project:function(){var t=this;this.$http.get("personwx.headproject/1.0/",{pid:this.id,isFinish:"0"}).then(function(e){console.log(e),"0"===t.$utils._get(e,"data.code")&&(t.$store.commit("set_bgt_c_task",t.$utils._get(e,"data.data",[])),""==t.bgt_ct_id&&t.$store.commit("set_bgt_ct_id",t.$utils._get(e,"data.data[0].id","")),t.get_project_detail())})},get_project_detail:function(t){var e=this;this.set_form_data(),this.$http.get("personwx.projectDetail/1.0/",{id:this.bgt_ct_id}).then(function(n){"0"===e.$utils._get(n,"data.code")&&(console.log(n),e.project_detail=e.$utils._get(n,"data.data",{}),"function"===typeof t&&t(),e.$nextTick(function(){e.get_swiper_c_height()}))})},get_swiper_c_height:function(){var e=this,n=t.createSelectorQuery().in(this);console.log(n.select("#content"+this.current_swiper)),n.select("#content"+this.current_swiper).boundingClientRect(function(t){console.log("得到布局位置信息"+JSON.stringify(t)),console.log("节点离页面顶部的距离为"+t.top),e.swiperHeight=t.height+"px"}).exec()},status_class:function(t){return 1===t?"text-green":2===t?"text-blue":3===t?"text-orange":"text-grey"},status_text:function(t){return 1===t?"确认能来":2===t?"准备中":3===t?"等待确认":"确认不来"},expectedPlace:function(t){return JSON.parse(t).join("")},goto_detail:function(e){t.navigateTo({url:"/pages/auditDetail/auditDetail?id=".concat(this.project.id,"&pid=").concat(e.id)})},deliveryPeriod:function(t){return this.$utils.format_date(t)},case_more:function(){var t=this;this.is_unfold=!this.is_unfold,this.$nextTick(function(){t.get_swiper_c_height()})},downCallback:function(t){t.resetUpScroll()},upCallback:function(t){var e=this;setTimeout(function(){e.get_project_detail(function(){t.endSuccess(e.person_list.length,!1)})},300)},goto_recruiting:function(){this.show_modal=!1,t.navigateTo({url:"/pages/personList/personList?recId=".concat(this.project.id,"&proId=").concat(this.project.pid)})},swiperChange:function(t){console.log(t),this.current_swiper=t.detail.current;var e=this.$utils._get(this.bgt_c_task[this.current_swiper],"id","");this.$store.commit("set_bgt_ct_id",e)},send_start:function(){var e=this;t.showModal({title:"提示",content:"确认输入的开工信息是否有误",success:function(t){t.confirm?(console.log("用户点击确定"),e.$http.post("personwx.updateprojectinfo/1.0/",{startTime:e.form_data.startTime,address:e.form_data.address,points:e.form_data.points,description:e.form_data.description,id:e.bgt_ct_id}).then(function(t){console.log(t);var n={id:e.bgt_ct_id,address:e.form_data.address,points:e.form_data.points,startTime:e.form_data.startTime};console.log(n),e.$http.post("personwx.startproject/1.0/",n).then(function(t){console.log(t),"0"==t.data.code&&e.get_head_project()})})):t.cancel&&console.log("用户点击取消")}})},dpDateChange:function(t){this.form_data.startTime=t.detail.value},chooseLocation:function(){var t,e="CLABZ-JECLX-JDZ43-TAZKO-FNNM7-NVF2G",n="智造劳务";if(""==this.form_data.points)t="";else{var i=JSON.parse(this.form_data.points);t=JSON.stringify({latitude:i[0],longitude:i[1]})}wx.navigateTo({url:"plugin://chooseLocation/index?key=".concat(e,"&referer=").concat(n,"&location=").concat(t)})},tabSelect:function(t){this.TabCur=t.currentTarget.dataset.id,this.scrollLeft=60*(t.currentTarget.dataset.id-1)},goto_log:function(){t.navigateTo({url:"/pages/tabbar/workbench/logReport/logReport"})},goto_error:function(){t.navigateTo({url:"/pages/tabbar/workbench/errorReport/errorReport"})},scan:function(){var e=c(i.default.mark(function e(){var n;return i.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.checkPermission();case 2:if(n=e.sent,1===n){e.next=5;break}return e.abrupt("return");case 5:t.scanCode({success:function(t){console.log("条码类型："+t.scanType),console.log("条码内容："+t.result)},fail:function(t){console.log(t)}});case 6:case"end":return e.stop()}},e,this)}));function n(){return e.apply(this,arguments)}return n}(),checkPermission:function(){var e=c(i.default.mark(function e(n){var o;return i.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!r.default.isIOS){e.next=6;break}return e.next=3,r.default.requestIOS("camera");case 3:e.t0=e.sent,e.next=9;break;case 6:return e.next=8,r.default.requestAndroid("android.permission.CAMERA");case 8:e.t0=e.sent;case 9:return o=e.t0,null===o||1===o?o=1:t.showModal({content:"需要相机权限",confirmText:"设置",success:function(t){t.confirm&&r.default.gotoAppSetting()}}),e.abrupt("return",o);case 12:case"end":return e.stop()}},e,this)}));function n(t){return e.apply(this,arguments)}return n}(),finish_task:function(){var e=this;t.showModal({title:"提示",content:"辛苦了，确认任务结案？",confirmText:"确认结案",success:function(n){n.confirm?(console.log("用户点击确定"),e.$http.post("personwx.projectfinish/1.0/",{id:e.bgt_ct_id}).then(function(n){e.$_.get(n,"data.success",!1)&&(t.switchTab({url:"/pages/tabbar/task/task"}),t.$emit("refreshList"))})):n.cancel&&console.log("用户点击取消")}})}}};e.default=h}).call(this,n("543d")["default"])},e574:function(t,e,n){"use strict";n.r(e);var i=n("ad3e"),o=n("6e1f");for(var r in o)"default"!==r&&function(t){n.d(e,t,function(){return o[t]})}(r);n("b7bb");var a=n("2877"),s=Object(a["a"])(o["default"],i["a"],i["b"],!1,null,"6012ddc1",null);e["default"]=s.exports}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'pages/tabbar/workbench/workbenchHead-create-component',
    {
        'pages/tabbar/workbench/workbenchHead-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('543d')['createComponent'](__webpack_require__("e574"))
        })
    },
    [['pages/tabbar/workbench/workbenchHead-create-component']]
]);
