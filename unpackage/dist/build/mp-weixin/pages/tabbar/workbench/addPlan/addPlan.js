(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/tabbar/workbench/addPlan/addPlan"],{"0353":function(t,e,n){"use strict";var i,r=function(){var t=this,e=t.$createElement;t._self._c},o=[];n.d(e,"b",function(){return r}),n.d(e,"c",function(){return o}),n.d(e,"a",function(){return i})},"1c8b":function(t,e,n){"use strict";var i=n("37d0"),r=n.n(i);r.a},"1f31":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=o(n("a34a")),r=n("2f62");function o(t){return t&&t.__esModule?t:{default:t}}function a(t,e,n,i,r,o,a){try{var c=t[o](a),s=c.value}catch(u){return void n(u)}c.done?e(s):Promise.resolve(s).then(i,r)}function c(t){return function(){var e=this,n=arguments;return new Promise(function(i,r){var o=t.apply(e,n);function c(t){a(o,i,r,c,s,"next",t)}function s(t){a(o,i,r,c,s,"throw",t)}c(void 0)})}}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(e){u(t,e,n[e])})}return t}function u(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var d={data:function(){return{form_data:{deviceNo:"",title:"",description:""},person_list:[],check_arr:[],r_item:null,taskPersons:[]}},computed:s({},(0,r.mapState)(["bgt_c_task","bgt_ct_id"]),(0,r.mapGetters)(["user_role","id"]),{is_detail:function(){return null!==this.r_item}}),onLoad:function(t){this.init(t)},mounted:function(){},methods:{init:function(){var t=c(i.default.mark(function t(e){return i.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!e.item){t.next=6;break}return this.r_item=JSON.parse(decodeURIComponent(e.item)),console.log(this.r_item),this.set_data(),t.next=6,this.get_plan_detail();case 6:this.get_people_list();case 7:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),set_data:function(){this.form_data.deviceNo=this.r_item.deviceNo,this.form_data.title=this.r_item.title,this.form_data.description=this.r_item.description},get_people_list:function(){var t=this;this.$http.get("personwx.headpersonlist/1.0/",{proId:this.bgt_ct_id,pid:this.id}).then(function(e){console.log(e),t.person_list=t.$utils._get(e,"data.data",[]),t.person_list.forEach(function(e){t.check_arr.includes(e.pid)?t.$set(e,"checked",!0):t.$set(e,"checked",!1)})})},get_plan_detail:function(){var t=this;this.$http.get("personwx.personconsoltaskget/1.0/",{id:this.r_item.id}).then(function(e){console.log("detail",e),t.taskPersons=t.$_.get(e,"data.data.taskPersons",[]),t.check_arr=[],t.taskPersons.forEach(function(e){t.check_arr.push(e.pid)})})},checkboxChange:function(t){var e=this.person_list,n=t.detail.value;console.log(n),this.check_arr=n;for(var i=0,r=e.length;i<r;++i){var o=e[i];n.includes(o.pid)?this.$set(o,"checked",!0):this.$set(o,"checked",!1)}},save_plan:function(){var e=this;this.$http.post("personwx.personconsoltasksu/1.0/",{id:this.$utils._get(this.r_item,"id",""),deviceNo:this.form_data.deviceNo,title:this.form_data.title,description:this.form_data.description,pids:this.check_arr.join(","),proId:this.bgt_ct_id}).then(function(n){console.log(n),t.$emit("refplan"),e.back()})},back:function(){t.navigateBack({delta:1})}}};e.default=d}).call(this,n("543d")["default"])},"37d0":function(t,e,n){},"3ce1":function(t,e,n){"use strict";n.r(e);var i=n("1f31"),r=n.n(i);for(var o in i)"default"!==o&&function(t){n.d(e,t,function(){return i[t]})}(o);e["default"]=r.a},"65c2":function(t,e,n){"use strict";(function(t){n("ac93"),n("921b");i(n("66fd"));var e=i(n("f4be"));function i(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},f4be:function(t,e,n){"use strict";n.r(e);var i=n("0353"),r=n("3ce1");for(var o in r)"default"!==o&&function(t){n.d(e,t,function(){return r[t]})}(o);n("1c8b");var a,c=n("f0c5"),s=Object(c["a"])(r["default"],i["b"],i["c"],!1,null,"e0060546",null,!1,i["a"],a);e["default"]=s.exports}},[["65c2","common/runtime","common/vendor"]]]);