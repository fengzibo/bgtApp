(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/tabbar/task/createTask/step1"],{"2e41":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n("2f62");function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){a(t,e,n[e])})}return t}function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var o=n("d040"),d={data:function(){var t=this.$utils.format_date(new Date);return{form_data:{industry:"请选择任务行业",equipment_name:"",task_no:"",company:"",budget:"",delivery:t,remark:"",deviceNum:""},industry_list:[],industry_index:0,loading:!0}},props:{route_id:{type:String,default:function(){return""}}},computed:i({},(0,r.mapState)(["current_task"])),onReady:function(){console.log("ready")},mounted:function(){console.log("mounted"),this.init(),console.log(this.route_id)},methods:{init:function(){var e=this;t.showLoading({title:"加载中"}),this.loading=!0,this.$http.post("personwx.hyxx/1.0/",{dictId:"e7f70f44ebf3d55e2fac4af73e29ba36"}).then(function(n){if(console.log(n),"0"==n.data.code){if(e.industry_list=e.$utils._get(n,"data.data.data",[]),e.form_data.industry=e.industry_list[0].description,e.route_id){var r=e.industry_list.findIndex(function(t){return t.id==e.current_task.industry});e.industry_index=r<0?0:r,console.log(e.industry_index),e.form_data.industry=e.industry_list[e.industry_index].description,e.form_data.equipment_name=e.current_task.deviceName,e.form_data.deviceNum=e.current_task.deviceNum,e.form_data.task_no=e.current_task.proNumber,e.form_data.company=e.current_task.scompany,e.form_data.budget=e.current_task.budget,e.form_data.delivery=e.$utils.format_date(e.current_task.deliveryPeriod),e.form_data.remark=e.current_task.description}t.hideLoading(),e.loading=!1}})},DateChange:function(t){this.form_data.delivery=t.detail.value},formSubmit:function(e){t.showLoading({title:""});var n=[{name:"industry",checkType:"notnull",checkRule:"",errorMsg:"任务行业不能为空"},{name:"equipment_name",checkType:"notnull",checkRule:"",errorMsg:"设备名称不能为空"},{name:"company",checkType:"notnull",checkRule:"",errorMsg:"服务公司不能为空"}],r=o.check(this.form_data,n);r?this.$http.post("personwx.projectinfo/1.0/",{industry:this.industry_list[this.industry_index].id,scompany:this.form_data.company,deviceName:this.form_data.equipment_name,deviceNum:this.form_data.deviceNum,proNumber:this.form_data.task_no,budget:this.form_data.budget,deliveryPeriod:this.form_data.delivery,description:this.form_data.remark,id:this.route_id?this.route_id:""}).then(function(n){console.log(n),t.showToast({title:"提交成功!",icon:"success"}),t.hideLoading(),e(n.data.data.id)}):t.showToast({title:o.error,icon:"none"})},industryChange:function(t){this.industry_index=t.detail.value,this.form_data.industry=this.industry_list[this.industry_index].description}}};e.default=d}).call(this,n("543d")["default"])},"342e":function(t,e,n){"use strict";n.r(e);var r=n("db5b"),i=n("e0f2");for(var a in i)"default"!==a&&function(t){n.d(e,t,function(){return i[t]})}(a);n("e466");var o=n("2877"),d=Object(o["a"])(i["default"],r["a"],r["b"],!1,null,"65e451f9",null);e["default"]=d.exports},"793c":function(t,e,n){},db5b:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement;t._self._c},i=[];n.d(e,"a",function(){return r}),n.d(e,"b",function(){return i})},e0f2:function(t,e,n){"use strict";n.r(e);var r=n("2e41"),i=n.n(r);for(var a in r)"default"!==a&&function(t){n.d(e,t,function(){return r[t]})}(a);e["default"]=i.a},e466:function(t,e,n){"use strict";var r=n("793c"),i=n.n(r);i.a}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'pages/tabbar/task/createTask/step1-create-component',
    {
        'pages/tabbar/task/createTask/step1-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('543d')['createComponent'](__webpack_require__("342e"))
        })
    },
    [['pages/tabbar/task/createTask/step1-create-component']]
]);                
