(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/tabbar/task/createTask/createTask"],{3107:function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement;t._self._c;t._isMounted||(t.e0=function(e){t.show_modal=!0},t.e1=function(e){t.show_modal=!t.show_modal})},i=[];n.d(e,"a",function(){return o}),n.d(e,"b",function(){return i})},"348c":function(t,e,n){"use strict";n.r(e);var o=n("3107"),i=n("c272");for(var r in i)"default"!==r&&function(t){n.d(e,t,function(){return i[t]})}(r);n("f6ae");var s=n("2877"),a=Object(s["a"])(i["default"],o["a"],o["b"],!1,null,"da0ed5ea",null);e["default"]=a.exports},"64af":function(t,e,n){"use strict";(function(t){n("ac93"),n("921b");o(n("66fd"));var e=o(n("348c"));function o(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},c272:function(t,e,n){"use strict";n.r(e);var o=n("f31e"),i=n.n(o);for(var r in o)"default"!==r&&function(t){n.d(e,t,function(){return o[t]})}(r);e["default"]=i.a},ceaf:function(t,e,n){},f31e:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=n("2f62");function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),o.forEach(function(e){r(t,e,n[e])})}return t}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var s=function(){return Promise.all([n.e("common/vendor"),n.e("pages/tabbar/task/createTask/step1")]).then(n.bind(null,"342e"))},a=function(){return Promise.all([n.e("common/vendor"),n.e("pages/tabbar/task/createTask/step2")]).then(n.bind(null,"f66a"))},c=function(){return n.e("pages/tabbar/task/createTask/step3").then(n.bind(null,"6391"))},u=function(){return n.e("pages/tabbar/task/createTask/step4").then(n.bind(null,"46f2"))},l=requirePlugin("chooseLocation"),f={data:function(){return{numList:[{name:"任务信息"},{name:"招募信息"},{name:"人员招募筛选"},{name:"开始生产"}],form_title:["任务基本信息","招募信息","任务需求"],num:0,scrollTop:0,old:{scrollTop:0},task_id:"",route_id:"",loading:!0,recruiting_info:{},recruit_list:[],show_modal:!1,location:null,startTime:""}},components:{stepOne:s,stepTwo:a,stepThree:c,stepFour:u},onLoad:function(t){var e=this;if(console.log(getCurrentPages()),console.log(t.id),setTimeout(function(){e.$store.commit("setRefreshNum",Math.random())},3e3),this.route_id=t.id,this.route_id){var n=this.current_task.status;"0"==n?this.num=1:"1"==n&&(this.num=2)}this.loading=!1},onShow:function(){this.location=l.getLocation(),console.log("show,loc",this.location)},computed:i({},(0,o.mapState)(["current_task"]),{can_create:function(){return this.$_.some(this.recruit_list,["status","5"])}}),methods:{next:function(){var e=this;switch(this.num){case 0:this.$refs.stepOne.formSubmit(function(n,o){e.num++,e.task_id=n,e.startTime=o,t.$emit("refreshList")});break;case 1:this.$refs.stepTwo.formSubmit(function(){t.$emit("refreshList"),e.num++});break;default:break}this.scrollTop=this.old.scrollTop,this.$nextTick(function(){this.scrollTop=0})},prev:function(){this.num--},scroll:function(t){this.old.scrollTop=t.detail.scrollTop},update_recruiting_info:function(t){this.recruiting_info=t.info,this.recruit_list=t.list},endCreate:function(e){var n=this,o=0;this.recruit_list.forEach(function(t){"5"==t.status&&o++}),t.showModal({title:"提示",content:"当前您选择了".concat(o,"人，其他人将自动不录用，是否确定？"),success:function(o){if(o.confirm){console.log("用户点击确定");var i={proId:n.recruiting_info.proId,recId:n.recruiting_info.id,formId:e.detail.formId,path:"pages/tabbar/task/task"};console.log(i),n.$http.post("personwx.finishrecruit/1.0/",i).then(function(e){console.log(e),n.scrollTop=n.old.scrollTop,n.$nextTick(function(){this.scrollTop=0}),n.num++,t.$emit("refreshList")})}else o.cancel&&console.log("用户点击取消")}})},goto_recruiting:function(){this.show_modal=!1,t.navigateTo({url:"/pages/personList/personList?recId=".concat(this.recruiting_info.id,"&proId=").concat(this.recruiting_info.proId)})},go_list:function(){t.switchTab({url:"/pages/tabbar/task/task"})}}};e.default=f}).call(this,n("543d")["default"])},f6ae:function(t,e,n){"use strict";var o=n("ceaf"),i=n.n(o);i.a}},[["64af","common/runtime","common/vendor"]]]);