(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/tabbar/task/createTask/step2"],{2298:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=(t._self._c,t.__map(t.claim_array,function(e,i){var a=t.is_in_selectClaim(e,t.select_claim);return{$orig:t.__get_orig(e),m0:a}})),a=t.__map(t.welfare_array,function(e,i){var a=t.is_in_selectClaim(e,t.select_welfare);return{$orig:t.__get_orig(e),m1:a}});t.$mp.data=Object.assign({},{$root:{l0:i,l1:a}})},r=[];i.d(e,"a",function(){return a}),i.d(e,"b",function(){return r})},4175:function(t,e,i){"use strict";var a=i("8eba"),r=i.n(a);r.a},"8eba":function(t,e,i){},c8c2:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=i("2f62");function r(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},a=Object.keys(i);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(i).filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable}))),a.forEach(function(e){n(t,e,i[e])})}return t}function n(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}i("d040");var o={data:function(){var t=this.getDate({format:!0});return{form_data:{recruiting_name:"",start_time:t,task_cycle:"",cycle_particle:"天",work_place:"请选择工作地点",explain:"",valid_date:t},particle:["天","周","月","年"],particle_index:0,member_type:[],claim_array:["面试","工作经验不限","熟手"],select_claim:[],welfare_array:["包吃","包住"],select_welfare:[],region:["广东省","广州市","海珠区"]}},props:{task_id:{type:String,default:function(){return""}},route_id:{type:String,default:function(){return""}},recruiting_info:{type:Object,default:function(){return{}}},startTime:{type:String,default:function(){return""}}},components:{},computed:r({},(0,a.mapState)(["current_task"]),{requirementInfo:function(){var t=[];return this.member_type.forEach(function(e){if(e.checked){var i={};i.type=e.data.name,i.num=e.data.people,i.price=e.data.price,t.push(i)}}),t},workRequest:function(){var t=[];return this.select_claim.forEach(function(e){t.push(e.itemValue)}),JSON.stringify(t)},welfareInfo:function(){var t=[];return this.select_welfare.forEach(function(e){t.push(e.itemValue)}),JSON.stringify(t)}}),mounted:function(){var e=this;this.init(),t.$on("refreshJwt",function(t){e.init()})},beforeDestroy:function(){t.$off("refreshJwt")},methods:{init:function(){var e=this;t.showLoading({title:"加载中"}),this.loading=!0,Promise.all([this.$http.post("personwx.hyxx/1.0/",{dictId:"1a52c05cef9d569b88a03cf8f2884965"}),this.$http.post("personwx.hyxx/1.0/",{dictId:"3dd875e620061483a0af551098c99e91"}),this.$http.post("personwx.tylelist/1.0/")]).then(function(i){console.log(i),e.claim_array=i[0].data.data.data,e.welfare_array=i[1].data.data.data,console.log(e.recruiting_info);var a=[],r=e.$utils._get(i[2],"data.data.data",[]);r.forEach(function(t,e){a.push(t)}),a.forEach(function(t){var i={value:t.id,name:t.typeName,data:{name:t.typeName,people:"",price:""}};e.member_type.push(i)}),""!==e.startTime?e.form_data.start_time=e.startTime:e.form_data.start_time=e.$utils.format_date(e.$utils._get(e.current_task,"startTime",new Date)),"{}"!==JSON.stringify(e.recruiting_info)&&e.set_data(),t.hideLoading(),e.loading=!1})},set_data:function(){var t=this;this.form_data.recruiting_name=this.recruiting_info.title,this.form_data.start_time=this.$utils.format_date(this.recruiting_info.startData),this.form_data.task_cycle=this.recruiting_info.duration,this.form_data.cycle_particle=this.recruiting_info.unit,this.particle_index=this.particle.indexOf(this.recruiting_info.unit),this.form_data.explain=this.recruiting_info.remark,this.form_data.valid_date=this.$utils.format_date(this.recruiting_info.validityPeriod);try{var e=JSON.parse(this.recruiting_info.requirementInfo);console.log(e),e.forEach(function(e){for(var i=0;i<t.member_type.length;i++){var a=t.member_type[i];if(e.type==a.name){t.$set(a,"checked",!0),a.data.name=e.type,a.data.people=e.num,a.data.price=e.price;break}}}),this.set_select_data(JSON.parse(this.recruiting_info.workRequest),this.claim_array,this.select_claim),this.set_select_data(JSON.parse(this.recruiting_info.welfareInfo),this.welfare_array,this.select_welfare),this.region=JSON.parse(this.recruiting_info.workAddress)}catch(i){console.log(i)}},set_select_data:function(t,e,i){t.forEach(function(t){for(var a=0;a<e.length;a++){var r=e[a];if(t==r.itemValue){i.push(r);break}}})},startDateChange:function(t){this.form_data.start_time=t.detail.value},validDateChange:function(t){this.form_data.valid_date=t.detail.value},formSubmit:function(t){this.form_data.work_place=JSON.stringify(this.region);var e={title:this.form_data.recruiting_name,requirementInfo:JSON.stringify(this.requirementInfo),startData:this.form_data.start_time,duration:this.form_data.task_cycle,unit:this.form_data.cycle_particle,workAddress:this.form_data.work_place,workRequest:this.workRequest,welfareInfo:this.welfareInfo,remark:this.form_data.explain,validityPeriod:this.form_data.valid_date,proId:this.route_id?this.route_id:this.task_id},i="personwx.projectrecruitadd/1.0/";console.log(e),"{}"!==JSON.stringify(this.recruiting_info)&&(i="personwx.projectrecruitupdate/1.0/",e.Id=this.recruiting_info.id),this.$http.post(i,e).then(function(e){console.log(e),t()})},checkboxChange:function(t){for(var e=this.member_type,i=t.detail.value,a=0,r=e.length;a<r;++a){var n=e[a];i.includes(n.value)?this.$set(n,"checked",!0):this.$set(n,"checked",!1)}console.log(this.member_type)},cycleChange:function(t){console.log(t),this.particle_index=t.target.value,this.form_data.cycle_particle=this.particle[this.particle_index]},is_in_selectClaim:function(t,e){var i=e.findIndex(function(e){return e.id==t.id});return i>=0},selectClaim:function(t,e){this.is_in_selectClaim(t,e)?e.splice(e.findIndex(function(e){return e.id==t.id}),1):e.push(t)},getDate:function(t){var e=new Date,i=e.getFullYear(),a=e.getMonth()+1,r=e.getDate();return a=a>9?a:"0"+a,r=r>9?r:"0"+r,"".concat(i,"-").concat(a,"-").concat(r)},RegionChange:function(t){this.region=t.detail.value}}};e.default=o}).call(this,i("543d")["default"])},df99:function(t,e,i){"use strict";i.r(e);var a=i("c8c2"),r=i.n(a);for(var n in a)"default"!==n&&function(t){i.d(e,t,function(){return a[t]})}(n);e["default"]=r.a},f66a:function(t,e,i){"use strict";i.r(e);var a=i("2298"),r=i("df99");for(var n in r)"default"!==n&&function(t){i.d(e,t,function(){return r[t]})}(n);i("4175");var o=i("2877"),c=Object(o["a"])(r["default"],a["a"],a["b"],!1,null,"2a82b63c",null);e["default"]=c.exports}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'pages/tabbar/task/createTask/step2-create-component',
    {
        'pages/tabbar/task/createTask/step2-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('543d')['createComponent'](__webpack_require__("f66a"))
        })
    },
    [['pages/tabbar/task/createTask/step2-create-component']]
]);
